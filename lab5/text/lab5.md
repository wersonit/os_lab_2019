# Лабораторная работа №5

## Задание 1

### Необходимые знания

1. Компилирование программ с помощью gcc.
2. Состояние гонки.
3. Критическая секция.
   Критическая секция — участок исполняемого кода программы, в котором производится доступ к общему ресурсу (данным или устройству), который не должен быть одновременно использован более чем одним потоком выполнения. При нахождении в критической секции двух (или более) потоков возникает состояние «гонки» («состязания»). Во избежание данной ситуации необходимо выполнение четырех условий:

Два потока не должны одновременно находиться в критических областях.
В программе не должно быть предположений о скорости или количестве процессоров.
Поток, находящийся вне критической области, не может блокировать другие потоки.
Невозможна ситуация, в которой поток вечно ждет попадания в критическую область.

5. POSIX threads: как создавать, как дожидаться завершения.
6. Как линковаться на бибилотеку `pthread`

Скомпилировать mutex.c без использования и с использованием мьютекса. Объяснить разницу в поведении программы.

### Ресурсы

1. [Туториал по POSIX threads от университета Карнеги-Меллона](https://www.cs.cmu.edu/afs/cs/academic/class/15492-f07/www/pthreads.html#SCHEDULING)
2. [Статья о Race condition [wikipedia]](https://en.wikipedia.org/wiki/Race_condition)
3. [Статья о Critical Section [wikipedia]](https://en.wikipedia.org/wiki/Critical_section)

## Задание 2

### Необходимые знания

1. POSIX threads: как создавать, как дожидаться завершения.
2. Как линковаться на бибилотеку `pthread`
3. Как использовать мьютексы. (Поток вызывает метод WaitOne из мьютекса, чтобы затребовать владение. Вызов блокируется до тех пор, пока мьютекс не будет доступен или пока не истечет дополнительное время ожидания. Если мьютексом не владеет ни один поток, сообщается состояние мьютекса.)

Написать программу для паралелльного вычисления факториала по модулю `mod` (`k!`), которая будет принимать на вход следующие параметры (пример: `-k 10 --pnum=4 --mod=10`):

1. `k` - число, факториал которого необходимо вычислить.
2. `pnum` - количество потоков.
3. `mod` - модуль факториала

Для синхронизации результатов необходимо использовать мьютексы.

### Ресурсы

1. [Туториал по POSIX threads от университета Карнеги-Меллона](https://www.cs.cmu.edu/afs/cs/academic/class/15492-f07/www/pthreads.html#SCHEDULING)

## Задание 3

### Необходимые знания

1. Состояние deadlock (Взаи́мная блокиро́вка (сокращённо взаимоблокировка, англ. deadlock) — ситуация в многозадачной среде или СУБД, при которой несколько процессов находятся в состоянии ожидания ресурсов, занятых друг другом, и ни один из них не может продолжать свое выполнение.)

Напишите программу для демонстрации состояния deadlock.

### Ресурсы

1. [Статья о deadlock [wikipedia]](https://en.wikipedia.org/wiki/Deadlock)

## Перед тем, как сдавать

Залейте ваш код в ваш репозиторий на GitHub. Убедитесь, что вы не добавляете в репозиторий бинарные файлы (программы, утилиты, библиотеки и т.д.).




